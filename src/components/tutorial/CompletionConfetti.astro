<script>
	if (
		window.location.pathname.endsWith('/tutorial/6-islands/3/') &&
		matchMedia('(prefers-reduced-motion: no-preference').matches
	) {
		const { default: confetti } = await import('canvas-confetti');
		function fire(particleRatio: number, opts: Parameters<typeof confetti>[0]) {
			confetti({
				particleCount: Math.floor(200 * particleRatio),
				gravity: 2,
				...opts,
			});
		}
		function burst() {
			fire(0.25, { spread: 26, startVelocity: 55 });
			fire(0.2, { spread: 60 });
			fire(0.35, { spread: 100, decay: 0.91, scalar: 0.8 });
			fire(0.1, { spread: 120, startVelocity: 25, decay: 0.92, scalar: 1.2 });
			fire(0.1, { spread: 135, startVelocity: 45 });
		}
		burst();
		setTimeout(burst, 400);
	}
</script>
